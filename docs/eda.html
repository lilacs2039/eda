---

title: lileda.eda


keywords: fastai
sidebar: home_sidebar

summary: "探索的データ分析（EDA）で便利に使える関数を集めたモジュール。  "
description: "探索的データ分析（EDA）で便利に使える関数を集めたモジュール。  "
nb_path: "nbs/00_eda.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/00_eda.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="%E5%82%99%E8%80%83%EF%BC%9A%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D%E7%94%A8%E3%83%87%E3%83%BC%E3%82%BF">&#20633;&#32771;&#65306;&#21205;&#20316;&#30906;&#35469;&#29992;&#12487;&#12540;&#12479;<a class="anchor-link" href="#%E5%82%99%E8%80%83%EF%BC%9A%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D%E7%94%A8%E3%83%87%E3%83%BC%E3%82%BF"> </a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>データ分析の定番モジュールの読み込み</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> inline
<span class="o">%</span><span class="k">reload_ext</span> autoreload
<span class="o">%</span><span class="k">autoreload</span> 2
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>データ（iris）をdfとして読み込み</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.datasets</span> <span class="kn">import</span> <span class="n">load_iris</span>
<span class="n">iris</span> <span class="o">=</span> <span class="n">load_iris</span><span class="p">()</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">iris</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">iris</span><span class="o">.</span><span class="n">feature_names</span><span class="p">)</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">iris</span><span class="o">.</span><span class="n">target</span><span class="p">)</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span><span class="s2">&quot;target&quot;</span><span class="p">})</span>
    <span class="p">,</span> <span class="n">left_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">right_index</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">target</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s2">&quot;category&quot;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="%E3%82%B0%E3%83%AD%E3%83%BC%E3%83%90%E3%83%AB%E9%96%A2%E6%95%B0">&#12464;&#12525;&#12540;&#12496;&#12523;&#38306;&#25968;<a class="anchor-link" href="#%E3%82%B0%E3%83%AD%E3%83%BC%E3%83%90%E3%83%AB%E9%96%A2%E6%95%B0"> </a></h1>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="setup" class="doc_header"><code>setup</code><a href="https://github.com/lilacs2039/lileda/tree/master/lileda/eda.py#L31" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>setup</code>(<strong><code>sub_dir</code></strong>=<em><code>''</code></em>, <strong><code>save_dir</code></strong>=<em><code>'output'</code></em>)</p>
</blockquote>
<p>ライブラリの初期設定をする。</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Parameters</strong></p>
<ul>
<li>sub_dir : str<ul>
<li>プロットの自動保存先のディレクトリ。</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>使用例１）デフォルトの保存先を確認</strong></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">_save_dir</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>使用例２）出力先フォルダを切り替え</strong></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">setup</span><span class="p">(</span><span class="n">sub_dir</span><span class="o">=</span><span class="s2">&quot;case1&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="describe" class="doc_header"><code>describe</code><a href="https://github.com/lilacs2039/lileda/tree/master/lileda/eda.py#L86" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>describe</code>(<strong><code>df</code></strong>)</p>
</blockquote>
<p>DataFrameの要約（統計量や欠損値の数など）を表示する。</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Parameters</strong></p>
<ul>
<li>df : pandas.DataFrame<ul>
<li>表示対象のDataFrameインスタンス。</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>実行例</strong></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">describe</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="savepath" class="doc_header"><code>savepath</code><a href="https://github.com/lilacs2039/lileda/tree/master/lileda/eda.py#L113" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>savepath</code>(<strong><code>filename</code></strong>)</p>
</blockquote>
<p>保存先の絶対パスを返す。</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Parameters</strong></p>
<ul>
<li>filename : str<ul>
<li>保存したいファイル名</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>利用例</strong></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">savepath</span><span class="p">(</span><span class="s2">&quot;image01&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="plot" class="doc_header"><code>plot</code><a href="https://github.com/lilacs2039/lileda/tree/master/lileda/eda.py#L124" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>plot</code>(<strong><code>ax_grid</code></strong>, <strong><code>tl</code></strong>=<em><code>None</code></em>, <strong><code>xl</code></strong>=<em><code>None</code></em>, <strong><code>yl</code></strong>=<em><code>None</code></em>, <strong><code>xtl</code></strong>=<em><code>None</code></em>, <strong><code>savename</code></strong>=<em><code>None</code></em>, <strong><code>ld_out</code></strong>=<em><code>False</code></em>)</p>
</blockquote>
<p>matplotlibやseabornのグラフにタイトル・軸ラベルを設定し、フォントサイズ・グラフサイズを調整して、画像ファイルとして保存する。</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Parameters</strong></p>
<ul>
<li>ax_grid : Union[plt.Axes, sns.FacetGrid, sns.PairGrid, sns.JointGrid, sns.pairplot, sns.jointplot]<ul>
<li>処理対象のmatplotlib・seabornグラフ</li>
</ul>
</li>
<li>tl : str<ul>
<li>タイトル文字列</li>
</ul>
</li>
<li>xl : str<ul>
<li>x軸ラベル</li>
</ul>
</li>
<li>yl : str<ul>
<li>y軸ラベル</li>
</ul>
</li>
<li>xtl : ?<ul>
<li>x軸の目盛りラベル</li>
</ul>
</li>
<li>ld_out : bool<ul>
<li>trueのとき、凡例をグラフ枠の外側へ配置する。</li>
</ul>
</li>
</ul>
<p>Note:figsizeとtitleのy位置について</p>
<ul>
<li>figsizeの指定の仕方によってtitle位置の設定のされ方が違う</li>
<li>figsizeをsns.jointplot(height=15)のように指定するなら、「, y=1.02」を追加<ul>
<li>seabornはfigsize指定がpltとは別になっているのでheightパラメータを使う。</li>
<li><a href="https://qiita.com/nj_ryoo0/items/9105ddfdf1b08b58398e">https://qiita.com/nj_ryoo0/items/9105ddfdf1b08b58398e</a></li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>実行例</strong></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">plot</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="s2">&quot;sepal length (cm)&quot;</span><span class="p">,</span><span class="s2">&quot;sepal width (cm)&quot;</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="s2">&quot;target&quot;</span><span class="p">)</span>
        <span class="p">,</span><span class="n">tl</span><span class="o">=</span><span class="s2">&quot;散布図&quot;</span><span class="p">,</span> <span class="n">xl</span><span class="o">=</span><span class="s2">&quot;がく長さ[cm]&quot;</span><span class="p">,</span> <span class="n">yl</span><span class="o">=</span><span class="s2">&quot;がく幅[cm]&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>
 

